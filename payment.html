<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-color: #1e1e2e;
            font-family: 'Poppins', sans-serif;
            color: white;
        }

        .container {
            margin-top: 20px;
        }

        .section-header {
            background-color: #2a2a3b;
            border: 1px solid #444;
            border-radius: 10px 10px 0 0;
            padding: 10px;
            text-align: center;
        }

        .section-header h2, .section-header h3, .section-header h4, .section-header h5 {
            color: #00d1ff;
            font-size: 1.5rem;
            margin: 0;
        }

        .section-content {
            background-color: #2a2a3b;
            border: 1px solid #444;
            border-radius: 0 0 10px 10px;
            padding: 10px;
            text-align: center;
            margin-bottom: 20px;
        }

        .section-content p {
            color: #7d7d7d;
            font-size: 1.2rem;
            margin: 0;
        }

        .section-content h4 {
            color: white;
            font-size: 1.2rem;
            margin-top: 0px;
        }

        .payment-method p {
            margin: 0;
            font-size: 1rem;
            color: #fff;
        }

        .payment-method img {
            max-width: 150px;
        }

        .btn-primary {
            margin-top: 20px;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 1rem;
        }

        .form-control-file, .form-control {
            margin-top: 10px;
            font-size: 1rem;
        }

        .form-text {
            font-size: 0.85rem;
            color: #6c757d;
        }

        .footer {
            background-color: #708090;
            color: white;
            padding: 20px 0;
            margin-top: 40px;
            text-align: center;
        }
        
        .success-notification {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #ffffff;
    padding: 20px;
    border: 2px solid #4CAF50;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    text-align: center;
    z-index: 1000;
}

.checkmark-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
}

.checkmark {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    display: inline-block;
    border: 2px solid #4CAF50;
    position: relative;
    animation: checkmark-animation 1s ease-in-out;
}

.checkmark::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 14px;
    height: 28px;
    border-right: 2px solid #4CAF50;
    border-bottom: 2px solid #4CAF50;
    transform: translate(-50%, -50%) rotate(45deg);
}

@keyframes checkmark-animation {
    0% {
        width: 0;
        height: 0;
        opacity: 0;
    }
    50% {
        width: 56px;
        height: 56px;
        opacity: 1;
    }
    100% {
        width: 56px;
        height: 56px;
        opacity: 1;
    }
}

.success-message {
    margin-top: 10px;
    font-size: 16px;
    color: #4CAF50;
}
    </style>
</head>
<body>
    <div class="container">
        <div class="section-header">
            <h2>Payment</h2>
        </div>
        <div class="section-content">
            <h4>Total Pembayaran</h4>
            <p id="totalPayment"></p>
        </div>
        <div class="section-header">
            <h3>Order ID</h3>
        </div>
        <div class="section-content">
            <p id="orderId"></p>
        </div>
        <div class="section-header">
            <h4>Informasi Pembayaran</h4>
        </div>
        <div class="section-content payment-method">
            <h4>Silakan Transfer ke :</h4>
            <div id="paymentMethodDetails"></div>
        </div>
        <div class="section-header">
            <h4>Upload Bukti Pembayaran</h4>
        </div>
        <div class="section-content">
            <form id="paymentForm" method="POST" action="templatess.php" enctype="multipart/form-data">
                <input type="file" name="paymentScreenshot" id="paymentScreenshot" accept="image/*" class="form-control-file">
                <input type="text" name="payerName" id="payerName" class="form-control mt-3" placeholder="Atas Nama Pengirim" required>
                <input type="hidden" name="orderId" id="orderIdField">
                <input type="hidden" name="totalPayment" id="totalPaymentField">
                <input type="hidden" name="selectedPaymentMethod" id="selectedPaymentMethodField">
                <button type="submit" id="submitButton" class="btn btn-primary mt-3" disabled>Kirim</button>
            </form>
        </div>
    </div>

    <div id="successNotification" class="success-notification" style="display:none;">
    <div class="checkmark-wrapper">
        <div class="checkmark"></div>
    </div>
    <p class="success-message">Silakan tunggu 1-10 menit pesanan anda sedang diproses!</p>
</div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const totalPayment = localStorage.getItem('totalPayment');
            const selectedPaymentMethod = localStorage.getItem('selectedPaymentMethod');
            const orderId = localStorage.getItem('orderId');
            const orderDetails = `Order ID: ${orderId}\nTotal Payment: Rp ${totalPayment}\nPayment Method: ${selectedPaymentMethod}`;

            document.getElementById('totalPayment').innerText = `Rp ${totalPayment}`;
            document.getElementById('orderId').innerText = orderId;

            const paymentMethodDetails = document.getElementById('paymentMethodDetails');
            let paymentInfo = '';
            switch(selectedPaymentMethod) {
                case 'DANA':
                    paymentInfo = '<p>Nomor Dana: 081234567890</p><p>Atas Nama: Nama Anda</p>';
                    break;
                case 'GoPay':
                    paymentInfo = '<p>Nomor GoPay: 081234567890</p><p>Atas Nama: Nama Anda</p>';
                    break;
                case 'ShopeePay':
                    paymentInfo = '<p>Nomor ShopeePay: 081234567890</p><p>Atas Nama: Nama Anda</p>';
                    break;
                case 'QRIS':
                    paymentInfo = '<img src="https://raw.githubusercontent.com/SansLimited/bukti-pembayaran/main/uploads/qr_ID1022153201143_28.07.24_172214173.jpeg" alt="QRIS">';
                    break;
                case 'Bank BCA':
                    paymentInfo = '<p>NoRek BCA: 081234567890</p><p>Atas Nama: Nama Anda</p>';
                    break;
                case 'Bank BRI':
                    paymentInfo = '<p>NoRek BRI: 081234567890</p><p>Atas Nama: Nama Anda</p>';
                    break;
                default:
                    paymentInfo = '<p>Metode pembayaran tidak tersedia.</p>';
            }
            paymentMethodDetails.innerHTML = paymentInfo;

            const fileInput = document.getElementById('paymentScreenshot');
            const nameInput = document.getElementById('payerName');
            const submitButton = document.getElementById('submitButton');

            function checkFormValidity() {
                submitButton.disabled = !fileInput.value || !nameInput.value;
            }

            fileInput.addEventListener('change', checkFormValidity);
            nameInput.addEventListener('input', checkFormValidity);

            document.getElementById('paymentForm').addEventListener('submit', function(event) {
                event.preventDefault();
                const formData = new FormData(this);
                fetch('templatess.php', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.text())
                .then(data => {
                    console.log('WhatsApp Notification Sent:', data);
                    document.getElementById('successNotification').style.display = 'block';
                })
                .catch(error => {
                    console.error('Error sending WhatsApp notification:', error);
                });
            });

            // Set hidden fields with the correct values
            document.getElementById('orderIdField').value = orderId;
            document.getElementById('totalPaymentField').value = totalPayment;
            document.getElementById('selectedPaymentMethodField').value = selectedPaymentMethod;
        });
    </script>
</body>
</html>
